<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Relat√≥rio Fotogr√°fico RSS - Campo</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        :root {
            --primary: #667eea;
            --primary-dark: #5568d3;
            --secondary: #764ba2;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #1e293b;
            --light: #f8fafc;
            --border: #e2e8f0;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            min-height: 100vh;
            padding-bottom: 80px;
        }
        
        /* LANDING PAGE */
        .landing {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
            text-align: center;
            color: white;
        }
        
        .landing-logo {
            font-size: 80px;
            margin-bottom: 20px;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        
        .landing h1 {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .landing p {
            font-size: 16px;
            opacity: 0.95;
            margin-bottom: 30px;
            max-width: 400px;
        }
        
        .landing-info {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .landing-info h3 {
            font-size: 18px;
            margin-bottom: 15px;
        }
        
        .landing-features {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            font-size: 14px;
        }
        
        .feature-item {
            background: rgba(255,255,255,0.1);
            padding: 10px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-start {
            background: white;
            color: var(--primary);
            border: none;
            padding: 18px 50px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            transition: all 0.3s;
            font-family: 'Poppins', sans-serif;
        }
        
        .btn-start:active {
            transform: scale(0.95);
        }
        
        /* MAIN APP */
        .app {
            display: none;
            padding: 20px 10px;
        }
        
        .app.active {
            display: block;
        }
        
        /* HEADER */
        .header {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .header h1 {
            font-size: 20px;
            color: var(--dark);
            margin-bottom: 5px;
        }
        
        .header p {
            font-size: 13px;
            color: #64748b;
        }
        
        /* PROGRESS CARD */
        .progress-card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            text-align: center;
            padding: 15px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            border-radius: 15px;
            color: white;
        }
        
        .stat-number {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 11px;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .progress-bar-container {
            background: #e2e8f0;
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
        }
        
        .progress-bar-fill {
            background: linear-gradient(90deg, var(--success) 0%, #34d399 100%);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 13px;
        }
        
        /* SECTIONS */
        .section {
            background: white;
            border-radius: 20px;
            margin-bottom: 15px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .section-header {
            padding: 18px 20px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
        }
        
        .section-header:active {
            transform: scale(0.98);
        }
        
        .section-header.critical {
            background: linear-gradient(135deg, var(--danger) 0%, #dc2626 100%);
        }
        
        .section-header.important {
            background: linear-gradient(135deg, var(--warning) 0%, #ea580c 100%);
        }
        
        .section-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
        }
        
        .badge {
            background: rgba(255,255,255,0.25);
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
        }
        
        .arrow {
            font-size: 20px;
            transition: transform 0.3s;
        }
        
        .arrow.open {
            transform: rotate(180deg);
        }
        
        .section-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        
        .section-content.show {
            max-height: 10000px;
            transition: max-height 0.5s ease-in;
        }
        
        /* ITEMS */
        .item {
            padding: 0;
            border-bottom: 1px solid var(--border);
        }
        
        .item:last-child {
            border-bottom: none;
        }
        
        .item.checked .item-header {
            background: #f0fdf4;
        }
        
        .item-header {
            padding: 15px 20px;
            display: flex;
            align-items: flex-start;
            gap: 12px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .item-header:active {
            background: #f8fafc;
        }
        
        .checkbox-custom {
            width: 28px;
            height: 28px;
            min-width: 28px;
            border: 2.5px solid #cbd5e1;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            background: white;
        }
        
        .checkbox-custom.checked {
            background: var(--success);
            border-color: var(--success);
        }
        
        .checkbox-custom.checked::after {
            content: '‚úì';
            color: white;
            font-size: 18px;
            font-weight: bold;
        }
        
        .item-info {
            flex: 1;
        }
        
        .item-title {
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 5px;
            font-size: 13px;
            line-height: 1.4;
        }
        
        .item-desc {
            font-size: 12px;
            color: #64748b;
            line-height: 1.5;
        }
        
        .star {
            color: var(--warning);
            font-size: 16px;
        }
        
        .expand-btn {
            padding: 5px 10px;
            background: var(--light);
            border: none;
            border-radius: 8px;
            font-size: 12px;
            color: var(--primary);
            cursor: pointer;
            font-weight: 500;
        }
        
        /* ITEM DETAILS (EXPANDIDO) */
        .item-details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            background: #fafbfc;
        }
        
        .item-details.show {
            max-height: 2000px;
            transition: max-height 0.5s ease-in;
        }
        
        .item-details-content {
            padding: 20px;
        }
        
        .detail-section {
            margin-bottom: 20px;
        }
        
        .detail-section:last-child {
            margin-bottom: 0;
        }
        
        .detail-title {
            font-size: 12px;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .detail-text {
            font-size: 13px;
            color: #475569;
            line-height: 1.6;
            background: white;
            padding: 12px;
            border-radius: 10px;
            border-left: 3px solid var(--primary);
        }
        
        .alert-box {
            padding: 12px;
            border-radius: 10px;
            font-size: 12px;
            line-height: 1.5;
            margin-bottom: 15px;
        }
        
        .alert-warning {
            background: #fef3c7;
            border-left: 3px solid var(--warning);
            color: #92400e;
        }
        
        .alert-danger {
            background: #fee2e2;
            border-left: 3px solid var(--danger);
            color: #991b1b;
        }
        
        /* PHOTO UPLOAD */
        .photo-section {
            margin-bottom: 20px;
        }
        
        .photo-upload-area {
            border: 2px dashed #cbd5e1;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            background: white;
        }
        
        .photo-upload-area:hover {
            border-color: var(--primary);
            background: #f8fafc;
        }
        
        .photo-upload-area.dragover {
            border-color: var(--primary);
            background: #eff6ff;
        }
        
        .upload-icon {
            font-size: 40px;
            margin-bottom: 10px;
        }
        
        .upload-text {
            font-size: 14px;
            color: var(--dark);
            font-weight: 500;
            margin-bottom: 5px;
        }
        
        .upload-hint {
            font-size: 11px;
            color: #64748b;
        }
        
        .photo-preview-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        
        .photo-preview {
            position: relative;
            border-radius: 10px;
            overflow: hidden;
            aspect-ratio: 4/3;
            background: #f1f5f9;
        }
        
        .photo-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .photo-remove {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(239, 68, 68, 0.9);
            color: white;
            border: none;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-weight: bold;
        }
        
        .photo-count {
            font-size: 11px;
            color: var(--success);
            font-weight: 600;
            margin-top: 8px;
        }
        
        /* NOTES */
        .notes-textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-family: 'Poppins', sans-serif;
            font-size: 13px;
            resize: vertical;
            min-height: 80px;
            transition: border-color 0.2s;
        }
        
        .notes-textarea:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        /* BOTTOM NAV */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 12px;
            display: flex;
            gap: 10px;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.1);
            z-index: 1000;
        }
        
        .nav-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
            font-family: 'Poppins', sans-serif;
        }
        
        .nav-btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
        }
        
        .nav-btn-secondary {
            background: var(--light);
            color: var(--dark);
        }
        
        .nav-btn:active {
            transform: scale(0.95);
        }
        
        /* FLOATING ACTION BUTTONS */
        .fab-container {
            position: fixed;
            bottom: 80px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            z-index: 999;
        }
        
        .fab {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            border: none;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }
        
        .fab:active {
            transform: scale(0.9);
        }
        
        .fab-secondary {
            background: white;
            color: var(--primary);
            font-size: 20px;
            width: 48px;
            height: 48px;
        }
        
        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 25px;
            max-width: 400px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-header {
            font-size: 18px;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 20px;
            text-align: center;
        }
        
        .modal-body {
            font-size: 14px;
            color: #475569;
            line-height: 1.6;
        }
        
        .modal-footer {
            margin-top: 20px;
            display: flex;
            gap: 10px;
        }
        
        .modal-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            font-size: 14px;
            font-family: 'Poppins', sans-serif;
        }
        
        .modal-btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .modal-btn-secondary {
            background: var(--light);
            color: var(--dark);
        }
        
        /* ANIMATIONS */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .section {
            animation: fadeIn 0.3s ease-out;
        }
        
        /* RESPONSIVE */
        @media (max-width: 360px) {
            .landing h1 { font-size: 26px; }
            .landing-logo { font-size: 60px; }
            .stats-grid { gap: 10px; }
            .stat-number { font-size: 24px; }
        }
        
        /* HIDE FILE INPUT */
        input[type="file"] {
            display: none;
        }
    </style>
</head>
<body>
    <!-- LANDING PAGE -->
    <div class="landing" id="landing">
        <div class="landing-logo">üì∏</div>
        <h1>Relat√≥rio Fotogr√°fico RSS</h1>
        <p>Sistema completo de checklist com captura de fotos para inspe√ß√£o de cl√≠nicas e estabelecimentos de sa√∫de</p>
        
        <div class="landing-info">
            <h3>‚ú® Recursos Premium</h3>
            <div class="landing-features">
                <div class="feature-item">
                    <span>üì∑</span>
                    <span>Upload de fotos</span>
                </div>
                <div class="feature-item">
                    <span>‚úì</span>
                    <span>Checklist completo</span>
                </div>
                <div class="feature-item">
                    <span>üìä</span>
                    <span>Progresso em tempo real</span>
                </div>
                <div class="feature-item">
                    <span>üíæ</span>
                    <span>Salva automaticamente</span>
                </div>
                <div class="feature-item">
                    <span>üìù</span>
                    <span>Anota√ß√µes por item</span>
                </div>
                <div class="feature-item">
                    <span>üéØ</span>
                    <span>33 itens organizados</span>
                </div>
            </div>
        </div>
        
        <button class="btn-start" onclick="startApp()">üöÄ Iniciar Inspe√ß√£o</button>
        
        <p style="margin-top: 30px; font-size: 12px; opacity: 0.8;">
            Cl√≠nica Dr. Cl√°udio Eul√°lio<br>
            Sala 1701 - Diamond Center - Teresina/PI
        </p>
    </div>

    <!-- MAIN APP -->
    <div class="app" id="app">
        <!-- HEADER -->
        <div class="header">
            <h1>üì∏ Relat√≥rio Fotogr√°fico RSS</h1>
            <p>Cl√≠nica Dr. Cl√°udio Eul√°lio - Sala 1701</p>
        </div>
        
        <!-- PROGRESS CARD -->
        <div class="progress-card">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="statDone">0</div>
                    <div class="stat-label">Conclu√≠das</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">33</div>
                    <div class="stat-label">Total</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="statCritical">0/13</div>
                    <div class="stat-label">Cr√≠ticas</div>
                </div>
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar-fill" id="progressBar">0%</div>
            </div>
        </div>

        <!-- SECTIONS -->
        <div id="sectionsContainer"></div>
        
        <div style="height: 20px;"></div>
    </div>

    <!-- FLOATING ACTION BUTTONS -->
    <div class="fab-container" id="fabContainer" style="display: none;">
        <button class="fab fab-secondary" onclick="scrollToTop()" title="Voltar ao topo">‚Üë</button>
        <button class="fab" onclick="openExportModal()" title="Exportar relat√≥rio">üì§</button>
    </div>

    <!-- BOTTOM NAV -->
    <div class="bottom-nav" id="bottomNav" style="display: none;">
        <button class="nav-btn nav-btn-secondary" onclick="expandAll()">üìÇ Abrir Tudo</button>
        <button class="nav-btn nav-btn-secondary" onclick="collapseAll()">üìÅ Fechar</button>
        <button class="nav-btn nav-btn-primary" onclick="openSummary()">üìä Resumo</button>
    </div>

    <!-- MODAL RESUMO -->
    <div class="modal" id="summaryModal">
        <div class="modal-content">
            <div class="modal-header">üìä Resumo da Inspe√ß√£o</div>
            <div class="modal-body" id="summaryContent"></div>
            <div class="modal-footer">
                <button class="modal-btn modal-btn-secondary" onclick="closeSummary()">Fechar</button>
                <button class="modal-btn modal-btn-primary" onclick="generateReport()">üìÑ Gerar Relat√≥rio</button>
            </div>
        </div>
    </div>

    <!-- MODAL EXPORTAR -->
    <div class="modal" id="exportModal">
        <div class="modal-content">
            <div class="modal-header">üì§ Exportar Dados</div>
            <div class="modal-body">
                <p>Escolha como deseja exportar seu progresso:</p>
                <div style="margin-top: 20px;">
                    <button class="modal-btn modal-btn-primary" onclick="downloadJSON()" style="width: 100%; margin-bottom: 10px;">
                        üíæ Baixar JSON (Backup Completo)
                    </button>
                    <button class="modal-btn modal-btn-primary" onclick="shareProgress()" style="width: 100%;">
                        üì± Compartilhar Progresso
                    </button>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn modal-btn-secondary" onclick="closeExportModal()">Fechar</button>
            </div>
        </div>
    </div>

    <script>
        // DATA STRUCTURE
        const sections = [
            {
                id: 1,
                title: "üè¢ FACHADA E ACESSO",
                count: 3,
                type: "normal",
                items: [
                    {
                        id: 1,
                        title: "FOTO 01 - Fachada do Edif√≠cio Diamond Center",
                        desc: "Vista externa completa, letreiro vis√≠vel, contexto urbano",
                        tips: "üí° Tire da cal√ßada oposta (10-15m). Modo horizontal.",
                        critical: false
                    },
                    {
                        id: 2,
                        title: "FOTO 02 - Entrada da Sala 1701",
                        desc: "Porta com n√∫mero bem vis√≠vel, acesso ao 17¬∫ andar",
                        tips: "üí° 2-3 metros de dist√¢ncia. N√∫mero deve aparecer claramente.",
                        critical: false
                    },
                    {
                        id: 3,
                        title: "FOTO 03 - Placa de Identifica√ß√£o do M√©dico",
                        desc: "Placa 'Dr. Cl√°udio Eul√°lio - Cirurgia Pl√°stica', leg√≠vel",
                        tips: "üí° Close (0,5-1m). Evite reflexos no vidro/acr√≠lico.",
                        critical: false
                    }
                ]
            },
            {
                id: 2,
                title: "üõãÔ∏è RECEP√á√ÉO E ESPERA",
                count: 2,
                type: "normal",
                items: [
                    {
                        id: 4,
                        title: "FOTO 04 - Balc√£o de Recep√ß√£o",
                        desc: "Vista geral, computador, √°rea de trabalho, organiza√ß√£o",
                        tips: "üí° Posicione-se de frente. Foto ampla pegando todo o ambiente.",
                        critical: false
                    },
                    {
                        id: 5,
                        title: "FOTO 05 - Sala de Espera",
                        desc: "Poltronas, TV, ambiente organizado e limpo",
                        tips: "üí° N√ÉO fotografe pacientes! Agende hor√°rio com menos movimento.",
                        alert: "‚ö†Ô∏è ATEN√á√ÉO: N√£o fotografar pessoas (LGPD)",
                        critical: false
                    }
                ]
            },
            {
                id: 3,
                title: "ü©∫ CONSULT√ìRIO M√âDICO",
                count: 1,
                type: "normal",
                items: [
                    {
                        id: 6,
                        title: "FOTO 06 - Consult√≥rio (vis√£o geral)",
                        desc: "Mesa, cadeiras, maca de exame, organiza√ß√£o do ambiente",
                        tips: "üí° Tire de um canto (pega mais √°rea). Evite documentos vis√≠veis.",
                        critical: false
                    }
                ]
            },
            {
                id: 4,
                title: "‚öïÔ∏è SALA DE PROCEDIMENTOS",
                count: 4,
                type: "important",
                items: [
                    {
                        id: 7,
                        title: "FOTO 07 - Sala de Procedimentos (vis√£o geral)",
                        desc: "Vista ampla: maca, foco, arm√°rios, bancada, COLETORES vis√≠veis",
                        tips: "üí° Tire diagonal de uma quina. Acenda todas as luzes. Inclua coletores!",
                        critical: false
                    },
                    {
                        id: 8,
                        title: "FOTO 08 - Maca El√©trica e Foco Cir√∫rgico",
                        desc: "Equipamentos principais, estado de conserva√ß√£o",
                        tips: "üí° Mostre que equipamentos est√£o em bom estado e funcionais.",
                        critical: false
                    },
                    {
                        id: 9,
                        title: "FOTO 09 - Arm√°rios de Materiais",
                        desc: "Arm√°rios para materiais est√©reis, organiza√ß√£o externa",
                        tips: "üí° Pergunte se pode fotografar interior. Se n√£o, s√≥ fechado.",
                        critical: false
                    },
                    {
                        id: 10,
                        title: "FOTO 10 - Bancada com Pia",
                        desc: "Pia, torneira (pedal?), sab√£o, papel toalha, bancada limpa",
                        tips: "üí° Se torneira for com pedal, tire close! √â um diferencial positivo.",
                        critical: false
                    }
                ]
            },
            {
                id: 5,
                title: "‚ôªÔ∏è COLETORES DE RES√çDUOS",
                count: 5,
                type: "critical",
                items: [
                    {
                        id: 11,
                        title: "FOTO 11 - Coletor Infectante (Grupo A) - Geral ‚≠ê",
                        desc: "Saco BRANCO, s√≠mbolo ‚ò£Ô∏è vis√≠vel, tampa com pedal, n√≠vel at√© 2/3",
                        tips: "üí° 1-2m de dist√¢ncia. Mostre lixeira completa (base at√© tampa).",
                        analysis: "Verificar: S√≠mbolo √© IMPRESSO? Tampa tem pedal? N√≠vel adequado?",
                        critical: true
                    },
                    {
                        id: 12,
                        title: "FOTO 12 - Infectante - Close no S√≠mbolo ‚≠ê",
                        desc: "S√≠mbolo ‚ò£Ô∏è bem n√≠tido. VERIFICAR: impresso ou adesivo?",
                        tips: "üí° 30-50cm de dist√¢ncia. Foto deve ficar leg√≠vel!",
                        alert: "‚ö†Ô∏è Se s√≠mbolo for ADESIVO = N√ÉO CONFORMIDADE!",
                        critical: true
                    },
                    {
                        id: 13,
                        title: "FOTO 13 - Coletor Comum (Grupo D) ‚≠ê",
                        desc: "Saco PRETO/CINZA, SEM s√≠mbolo, SEPARADO do infectante",
                        tips: "üí° Mostre que as duas lixeiras est√£o claramente separadas.",
                        alert: "‚ö†Ô∏è GRAVE: Res√≠duos infectantes no comum = MISTURA PROIBIDA!",
                        critical: true
                    },
                    {
                        id: 14,
                        title: "FOTO 14 - Perfurocortante FECHADO ‚≠ê‚≠ê‚≠ê",
                        desc: "Cor AMARELA, material r√≠gido, TAMPA VEDADA, at√© 2/3",
                        tips: "üí° 0,5-1m. Verifique visualmente se tampa est√° bem vedada!",
                        alert: "üö® NUNCA fotografe ABERTO! Risco de acidente!",
                        analysis: "Tampa fechada? Cor amarela? N√≠vel adequado? Sem avarias?",
                        critical: true
                    },
                    {
                        id: 15,
                        title: "FOTO 15 - Perfurocortante - Etiqueta ‚≠ê‚≠ê‚≠ê",
                        desc: "‚ò£Ô∏è, 'PERFUROCORTANTE', 'SALA 1701', capacidade, n√≠vel m√°ximo",
                        tips: "üí° 20-30cm bem de perto. Deve ficar 100% leg√≠vel!",
                        alert: "‚ö†Ô∏è Se faltar informa√ß√£o na etiqueta = n√£o conformidade!",
                        critical: true
                    }
                ]
            },
            {
                id: 6,
                title: "üßº EXPURGO",
                count: 3,
                type: "important",
                items: [
                    {
                        id: 16,
                        title: "FOTO 16 - Porta do Expurgo",
                        desc: "Identifica√ß√£o 'EXPURGO' ou 'SALA DE UTILIDADES' vis√≠vel",
                        tips: "üí° Porta externa com identifica√ß√£o leg√≠vel.",
                        critical: false
                    },
                    {
                        id: 17,
                        title: "FOTO 17 - Expurgo (vis√£o geral interna)",
                        desc: "Pia, prateleiras, produtos de limpeza, organiza√ß√£o",
                        tips: "üí° Vista ampla. Ambiente deve estar arrumado.",
                        critical: false
                    },
                    {
                        id: 18,
                        title: "FOTO 18 - Pia do Expurgo (detalhe) ‚≠ê",
                        desc: "Close pia e torneira. Verificar: pedal/alavanca/manual?",
                        tips: "üí° Torneira com pedal = √ìTIMO! Mencione no relat√≥rio.",
                        critical: true
                    }
                ]
            },
            {
                id: 7,
                title: "üöΩ BANHEIROS",
                count: 1,
                type: "normal",
                items: [
                    {
                        id: 19,
                        title: "FOTO 19 - Banheiro (vis√£o geral)",
                        desc: "Vaso, pia, revestimento cer√¢mico, limpeza e conserva√ß√£o",
                        tips: "üí° Fotografe com banheiro limpo e arrumado.",
                        critical: false
                    }
                ]
            },
            {
                id: 8,
                title: "üì¶ ARMAZ. TEMPOR√ÅRIO - 17¬∫",
                count: 3,
                type: "critical",
                items: [
                    {
                        id: 20,
                        title: "FOTO 20 - Porta/√Årea do Armazenamento",
                        desc: "Local no 17¬∫ andar, identifica√ß√£o, localiza√ß√£o",
                        tips: "üí° Pode ser sala, quartinho ou √°rea no corredor do andar.",
                        critical: false
                    },
                    {
                        id: 21,
                        title: "FOTO 21 - BOMBONA AZUL 50L ‚≠ê‚≠ê‚≠ê",
                        desc: "Cor AZUL, TAMPA HERM√âTICA!, etiqueta 'SALA 1701', ‚ò£Ô∏è",
                        tips: "üí° 0,5-1m. Foto deve mostrar CLARAMENTE que tampa est√° vedada!",
                        alert: "üö® GRAV√çSSIMO: Bombona ABERTA/MAL VEDADA = risco de contamina√ß√£o!",
                        analysis: "Pergunte ao respons√°vel: 'A bombona est√° bem fechada?'",
                        critical: true
                    },
                    {
                        id: 22,
                        title: "FOTO 22 - Lixeira Comum (se houver)",
                        desc: "Saco preto (Grupo D), separada do infectante",
                        tips: "üí° Mostrar segrega√ß√£o tamb√©m no armazenamento tempor√°rio.",
                        critical: false
                    }
                ]
            },
            {
                id: 9,
                title: "üè¢ ABRIGO EXTERNO - T√âRREO",
                count: 7,
                type: "critical",
                items: [
                    {
                        id: 23,
                        title: "FOTO 23 - Port√£o Rua Mios√≥tis",
                        desc: "Vista externa, port√£o onde caminh√£o para, acesso facilitado",
                        tips: "üí° Tire da cal√ßada mostrando port√£o e acesso.",
                        critical: false
                    },
                    {
                        id: 24,
                        title: "FOTO 24 - Porta Interna do Abrigo ‚≠ê",
                        desc: "Vista de dentro do edif√≠cio, identifica√ß√£o 'RES√çDUOS', ‚ò£Ô∏è",
                        tips: "üí° Entrada mostrando identifica√ß√£o clara.",
                        critical: true
                    },
                    {
                        id: 25,
                        title: "FOTO 25 - Interior do Abrigo (geral) ‚≠ê‚≠ê‚≠ê",
                        desc: "SEPARA√á√ÉO RSS/comum!, piso imperme√°vel, paredes, limpeza",
                        tips: "üí° Tire de cima para baixo. Acenda TODAS as luzes!",
                        analysis: "Separa√ß√£o clara? Piso lav√°vel? Presen√ßa de vetores? Recipientes fechados?",
                        critical: true
                    },
                    {
                        id: 26,
                        title: "FOTO 26 - Piso e Drenagem ‚≠ê",
                        desc: "Piso imperme√°vel (cer√¢mica/cimento), ralo sifonado, escoamento",
                        tips: "üí° Foto do ch√£o mostrando tipo de piso e drenagem.",
                        critical: true
                    },
                    {
                        id: 27,
                        title: "FOTO 27 - Ventila√ß√£o e TELA ‚≠ê‚≠ê",
                        desc: "Abertura ventila√ß√£o, TELA prote√ß√£o insetos/roedores √çNTEGRA",
                        tips: "üí° Close na abertura. Verifique se h√° rasgos na tela!",
                        alert: "üö® GRAVE: Falta de tela ou tela rasgada = entrada de vetores!",
                        critical: true
                    },
                    {
                        id: 28,
                        title: "FOTO 28 - Porta Espec√≠fica para RSS ‚≠ê",
                        desc: "√Årea/porta com ‚ò£Ô∏è, identifica√ß√£o 'GRUPO A' ou 'RSS', separada",
                        tips: "üí° Mostrar segrega√ß√£o no abrigo externo.",
                        critical: true
                    },
                    {
                        id: 29,
                        title: "FOTO 29 - Ponto de √Ågua",
                        desc: "Torneira/mangueira para higieniza√ß√£o, lavagem de coletores",
                        tips: "üí° Mostrar que √© poss√≠vel higienizar recipientes no local.",
                        critical: false
                    }
                ]
            },
            {
                id: 10,
                title: "üìÑ DOCUMENTA√á√ÉO T√âCNICA",
                count: 4,
                type: "important",
                items: [
                    {
                        id: 30,
                        title: "FOTO 30 - Certificado Reservat√≥rio ‚≠ê",
                        desc: "SANITIZAR, higieniza√ß√£o Abr/2025, validade 01/10/2025",
                        tips: "üí° Documento completo e leg√≠vel. Verifique validade!",
                        analysis: "Dentro da validade na data da visita?",
                        critical: true
                    },
                    {
                        id: 31,
                        title: "FOTO 31 - Certificado Dedetiza√ß√£o ‚≠ê",
                        desc: "T C Costa, data Abr/2025, validade 08/10/2025",
                        tips: "üí° Foto leg√≠vel de todo o certificado. Verifique validade!",
                        analysis: "Dentro da validade na data da visita?",
                        critical: true
                    },
                    {
                        id: 32,
                        title: "FOTO 32 - Contrato NATUS Ambiental",
                        desc: "1¬™ p√°gina, coleta mensal de RSS (Grupos A e E)",
                        tips: "üí° N√£o precisa contrato inteiro, s√≥ 1¬™ p√°gina identificando servi√ßo.",
                        critical: false
                    },
                    {
                        id: 33,
                        title: "FOTO 33 - Licen√ßa da NATUS (se dispon√≠vel)",
                        desc: "Licen√ßa ambiental da empresa coletora, CNPJ, validade",
                        tips: "üí° Se n√£o tiverem, anote no relat√≥rio 'n√£o disponibilizado'.",
                        critical: false
                    }
                ]
            }
        ];

        // STATE
        let appState = {
            itemsChecked: {},
            itemsPhotos: {},
            itemsNotes: {},
            startTime: null
        };

        // INIT
        function startApp() {
            document.getElementById('landing').style.display = 'none';
            document.getElementById('app').style.display = 'block';
            document.getElementById('bottomNav').style.display = 'flex';
            document.getElementById('fabContainer').style.display = 'flex';
            
            appState.startTime = new Date();
            loadState();
            renderSections();
            updateStats();
        }

        // RENDER SECTIONS
        function renderSections() {
            const container = document.getElementById('sectionsContainer');
            container.innerHTML = '';
            
            sections.forEach(section => {
                const sectionEl = document.createElement('div');
                sectionEl.className = 'section';
                sectionEl.innerHTML = `
                    <div class="section-header ${section.type}" onclick="toggleSection(${section.id})">
                        <div class="section-title">
                            <span>${section.title}</span>
                            <span class="badge">${section.count}</span>
                        </div>
                        <span class="arrow" id="arrow-${section.id}">‚ñº</span>
                    </div>
                    <div class="section-content" id="section-${section.id}">
                        ${section.items.map(item => renderItem(item)).join('')}
                    </div>
                `;
                container.appendChild(sectionEl);
            });
        }

        function renderItem(item) {
            const isChecked = appState.itemsChecked[item.id] || false;
            const photos = appState.itemsPhotos[item.id] || [];
            const notes = appState.itemsNotes[item.id] || '';
            
            return `
                <div class="item ${isChecked ? 'checked' : ''}" id="item-${item.id}">
                    <div class="item-header" onclick="toggleCheck(${item.id})">
                        <div class="checkbox-custom ${isChecked ? 'checked' : ''}" id="check-${item.id}"></div>
                        <div class="item-info">
                            <div class="item-title">
                                ${item.title}
                                ${item.critical ? '<span class="star">‚≠ê</span>' : ''}
                            </div>
                            <div class="item-desc">${item.desc}</div>
                        </div>
                        <button class="expand-btn" onclick="event.stopPropagation(); toggleDetails(${item.id})">+</button>
                    </div>
                    <div class="item-details" id="details-${item.id}">
                        <div class="item-details-content">
                            ${item.alert ? `<div class="alert-box ${item.alert.includes('GRAVE') ? 'alert-danger' : 'alert-warning'}">${item.alert}</div>` : ''}
                            
                            <div class="detail-section">
                                <div class="detail-title">üí° Dicas T√©cnicas</div>
                                <div class="detail-text">${item.tips}</div>
                            </div>
                            
                            ${item.analysis ? `
                            <div class="detail-section">
                                <div class="detail-title">üîç An√°lise Cr√≠tica</div>
                                <div class="detail-text">${item.analysis}</div>
                            </div>
                            ` : ''}
                            
                            <div class="detail-section photo-section">
                                <div class="detail-title">üì∏ Fotos (${photos.length})</div>
                                <div class="photo-upload-area" onclick="openCamera(${item.id})" 
                                     ondrop="dropPhoto(event, ${item.id})" 
                                     ondragover="event.preventDefault(); event.currentTarget.classList.add('dragover')"
                                     ondragleave="event.currentTarget.classList.remove('dragover')">
                                    <div class="upload-icon">üì∑</div>
                                    <div class="upload-text">Clique para adicionar foto</div>
                                    <div class="upload-hint">ou arraste e solte aqui</div>
                                </div>
                                <input type="file" id="file-${item.id}" accept="image/*" capture="environment" 
                                       onchange="handlePhoto(event, ${item.id})" multiple>
                                <div class="photo-preview-grid" id="preview-${item.id}">
                                    ${photos.map((photo, idx) => `
                                        <div class="photo-preview">
                                            <img src="${photo}" alt="Foto ${idx+1}">
                                            <button class="photo-remove" onclick="removePhoto(${item.id}, ${idx})">√ó</button>
                                        </div>
                                    `).join('')}
                                </div>
                                ${photos.length > 0 ? `<div class="photo-count">‚úì ${photos.length} foto(s) adicionada(s)</div>` : ''}
                            </div>
                            
                            <div class="detail-section">
                                <div class="detail-title">üìù Anota√ß√µes</div>
                                <textarea class="notes-textarea" 
                                          placeholder="Escreva suas observa√ß√µes aqui..."
                                          onchange="saveNote(${item.id}, this.value)">${notes}</textarea>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // TOGGLE FUNCTIONS
        function toggleSection(sectionId) {
            const content = document.getElementById(`section-${sectionId}`);
            const arrow = document.getElementById(`arrow-${sectionId}`);
            
            if (content.classList.contains('show')) {
                content.classList.remove('show');
                arrow.classList.remove('open');
            } else {
                content.classList.add('show');
                arrow.classList.add('open');
            }
        }

        function toggleCheck(itemId) {
            appState.itemsChecked[itemId] = !appState.itemsChecked[itemId];
            
            const item = document.getElementById(`item-${itemId}`);
            const checkbox = document.getElementById(`check-${itemId}`);
            
            if (appState.itemsChecked[itemId]) {
                item.classList.add('checked');
                checkbox.classList.add('checked');
            } else {
                item.classList.remove('checked');
                checkbox.classList.remove('checked');
            }
            
            updateStats();
            saveState();
        }

        function toggleDetails(itemId) {
            const details = document.getElementById(`details-${itemId}`);
            details.classList.toggle('show');
        }

        // PHOTO FUNCTIONS
        function openCamera(itemId) {
            document.getElementById(`file-${itemId}`).click();
        }

        function handlePhoto(event, itemId) {
            const files = event.target.files;
            if (!files.length) return;
            
            Array.from(files).forEach(file => {
                const reader = new FileReader();
                reader.onload = (e) => {
                    if (!appState.itemsPhotos[itemId]) {
                        appState.itemsPhotos[itemId] = [];
                    }
                    appState.itemsPhotos[itemId].push(e.target.result);
                    saveState();
                    updatePhotoPreview(itemId);
                };
                reader.readAsDataURL(file);
            });
        }

        function dropPhoto(event, itemId) {
            event.preventDefault();
            event.currentTarget.classList.remove('dragover');
            
            const files = event.dataTransfer.files;
            if (!files.length) return;
            
            Array.from(files).forEach(file => {
                if (!file.type.startsWith('image/')) return;
                
                const reader = new FileReader();
                reader.onload = (e) => {
                    if (!appState.itemsPhotos[itemId]) {
                        appState.itemsPhotos[itemId] = [];
                    }
                    appState.itemsPhotos[itemId].push(e.target.result);
                    saveState();
                    updatePhotoPreview(itemId);
                };
                reader.readAsDataURL(file);
            });
        }

        function removePhoto(itemId, photoIndex) {
            if (confirm('Remover esta foto?')) {
                appState.itemsPhotos[itemId].splice(photoIndex, 1);
                saveState();
                updatePhotoPreview(itemId);
            }
        }

        function updatePhotoPreview(itemId) {
            const photos = appState.itemsPhotos[itemId] || [];
            const preview = document.getElementById(`preview-${itemId}`);
            
            preview.innerHTML = photos.map((photo, idx) => `
                <div class="photo-preview">
                    <img src="${photo}" alt="Foto ${idx+1}">
                    <button class="photo-remove" onclick="removePhoto(${itemId}, ${idx})">√ó</button>
                </div>
            `).join('');
            
            // Update count
            const detail = preview.closest('.photo-section');
            const existingCount = detail.querySelector('.photo-count');
            if (existingCount) existingCount.remove();
            
            if (photos.length > 0) {
                const countDiv = document.createElement('div');
                countDiv.className = 'photo-count';
                countDiv.textContent = `‚úì ${photos.length} foto(s) adicionada(s)`;
                preview.after(countDiv);
            }
        }

        // NOTES
        function saveNote(itemId, note) {
            appState.itemsNotes[itemId] = note;
            saveState();
        }

        // STATS
        function updateStats() {
            const total = 33;
            const checked = Object.values(appState.itemsChecked).filter(v => v).length;
            const percentage = Math.round((checked / total) * 100);
            
            document.getElementById('statDone').textContent = checked;
            document.getElementById('progressBar').style.width = percentage + '%';
            document.getElementById('progressBar').textContent = percentage + '%';
            
            // Critical items
            let criticalChecked = 0;
            sections.forEach(section => {
                section.items.forEach(item => {
                    if (item.critical && appState.itemsChecked[item.id]) {
                        criticalChecked++;
                    }
                });
            });
            
            document.getElementById('statCritical').textContent = `${criticalChecked}/13`;
        }

        // EXPAND/COLLAPSE
        function expandAll() {
            sections.forEach(section => {
                const content = document.getElementById(`section-${section.id}`);
                const arrow = document.getElementById(`arrow-${section.id}`);
                content.classList.add('show');
                arrow.classList.add('open');
            });
        }

        function collapseAll() {
            sections.forEach(section => {
                const content = document.getElementById(`section-${section.id}`);
                const arrow = document.getElementById(`arrow-${section.id}`);
                content.classList.remove('show');
                arrow.classList.remove('open');
            });
        }

        // SCROLL
        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // SUMMARY
        function openSummary() {
            const checked = Object.values(appState.itemsChecked).filter(v => v).length;
            const total = 33;
            const percentage = Math.round((checked / total) * 100);
            
            let criticalChecked = 0;
            let totalPhotos = 0;
            let notesCount = 0;
            
            sections.forEach(section => {
                section.items.forEach(item => {
                    if (item.critical && appState.itemsChecked[item.id]) criticalChecked++;
                    if (appState.itemsPhotos[item.id]) totalPhotos += appState.itemsPhotos[item.id].length;
                    if (appState.itemsNotes[item.id]) notesCount++;
                });
            });
            
            const duration = appState.startTime ? 
                Math.round((new Date() - appState.startTime) / 60000) : 0;
            
            document.getElementById('summaryContent').innerHTML = `
                <div style="text-align: center; margin-bottom: 20px;">
                    <div style="font-size: 48px; font-weight: 700; color: var(--primary);">${percentage}%</div>
                    <div style="font-size: 14px; color: #64748b;">Progresso Total</div>
                </div>
                
                <div style="background: var(--light); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span>‚úì Itens conclu√≠dos:</span>
                        <strong>${checked} / ${total}</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span>‚≠ê Itens cr√≠ticos:</span>
                        <strong>${criticalChecked} / 13</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span>üì∏ Total de fotos:</span>
                        <strong>${totalPhotos}</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span>üìù Anota√ß√µes feitas:</span>
                        <strong>${notesCount}</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span>‚è±Ô∏è Tempo decorrido:</span>
                        <strong>${duration} min</strong>
                    </div>
                </div>
                
                <div style="background: #fef3c7; padding: 12px; border-radius: 10px; font-size: 12px;">
                    <strong>üí° Dica:</strong> Revise os itens cr√≠ticos ‚≠ê antes de finalizar!
                </div>
            `;
            
            document.getElementById('summaryModal').classList.add('active');
        }

        function closeSummary() {
            document.getElementById('summaryModal').classList.remove('active');
        }

        function generateReport() {
            alert('Funcionalidade de gera√ß√£o de relat√≥rio ser√° implementada em breve!');
        }

        // EXPORT
        function openExportModal() {
            document.getElementById('exportModal').classList.add('active');
        }

        function closeExportModal() {
            document.getElementById('exportModal').classList.remove('active');
        }

        function downloadJSON() {
            const data = {
                ...appState,
                exportDate: new Date().toISOString(),
                version: '1.0'
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `relatorio-rss-${Date.now()}.json`;
            a.click();
            
            closeExportModal();
        }

        function shareProgress() {
            const checked = Object.values(appState.itemsChecked).filter(v => v).length;
            const percentage = Math.round((checked / 33) * 100);
            
            const text = `üì∏ Relat√≥rio Fotogr√°fico RSS\n\n‚úì Progresso: ${percentage}%\n‚úì ${checked}/33 itens conclu√≠dos\n\n#RSS #Inspe√ß√£o #Cl√≠nicaEul√°lio`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Relat√≥rio Fotogr√°fico RSS',
                    text: text
                });
            } else {
                navigator.clipboard.writeText(text);
                alert('Texto copiado para √°rea de transfer√™ncia!');
            }
            
            closeExportModal();
        }

        // STORAGE
        function saveState() {
            localStorage.setItem('appState', JSON.stringify(appState));
        }

        function loadState() {
            const saved = localStorage.getItem('appState');
            if (saved) {
                appState = JSON.parse(saved);
            }
        }

        // INIT ON LOAD
        if (localStorage.getItem('appState')) {
            // Se j√° tem dados salvos, pular landing
            startApp();
        }
    </script>
</body>
</html>